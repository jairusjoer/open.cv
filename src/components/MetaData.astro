---
export interface Metadata {
  title: string;
  description?: string;
  image?: string;
  schema?: Record<string, unknown>;
}

interface Props {
  metadata: Metadata;
}

const { metadata } = Astro.props;

const getURL = (path: string) => String(new URL(path, Astro.site));
---

<meta charset="utf-8" />
<meta
  name="viewport"
  content="width=device-width"
/>

<meta
  name="generator"
  content={Astro.generator}
/>

<link
  rel="icon"
  href={getURL('favicon.png')}
  sizes="32x32"
/>
<link
  rel="apple-touch-icon"
  href={getURL('apple-touch-icon.png')}
/>
<title>{metadata.title}</title>
<meta
  name="title"
  content={metadata.title}
/>
<meta
  name="description"
  content={metadata?.description}
/>
<meta
  property="og:type"
  content="website"
/>
<meta
  property="og:url"
  content={getURL(Astro.url.pathname)}
/>
<meta
  property="og:title"
  content={metadata.title}
/>
<meta
  property="og:description"
  content={metadata?.description}
/>
<meta
  property="og:image"
  content={metadata?.image}
/>
<meta
  property="twitter:card"
  content="summary_large_image"
/>
<meta
  property="twitter:url"
  content={getURL(Astro.url.pathname)}
/>
<meta
  property="twitter:title"
  content={metadata.title}
/>
<meta
  property="twitter:description"
  content={metadata?.description}
/>
<meta
  property="twitter:image"
  content={metadata?.image}
/>
{
  metadata?.schema && (
    <script
      is:inline
      set:html={JSON.stringify(metadata.schema)}
      type="application/ld+json"
    />
  )
}
<slot />
